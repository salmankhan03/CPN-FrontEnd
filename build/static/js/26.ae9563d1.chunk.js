(this["webpackJsonpecommerce-admin"]=this["webpackJsonpecommerce-admin"]||[]).push([[26],{109:function(e,t,a){"use strict";var n=a(145),c=a.n(n),r=a(0),s=a(36);t.a=e=>{const[t,a]=Object(r.useState)([]||!1),[n,l]=Object(r.useState)(""),[o,i]=Object(r.useState)(!0),{isUpdate:d,setIsUpdate:u,currentPage:m,category:b,searchText:p,invoice:j,status:g,zone:f,time:x,sortedField:O,source:h,limitData:v,startDate:y,endDate:_}=Object(r.useContext)(s.a);return Object(r.useEffect)((()=>{let t=!1,n=c.a.CancelToken.source();return(async()=>{try{const c=await e({cancelToken:n.token});t||(a(c),l(""),i(!1))}catch(r){t||(l(r.message),c.a.isCancel(r),l(r.message),i(!1),a([]))}})(),u(!1),()=>{t=!0,n.cancel("Cancelled in cleanup")}}),[d,m,b,p,j,g,f,x,O,h,v,y,_]),{data:t,error:n,loading:o}}},1237:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(35),r=a(23),s=a(737),l=a(1209),o=a(1);var i=e=>{let{title:t,description:a}=e;return Object(o.jsxs)(l.a,{children:[Object(o.jsxs)("title",{children:[" ",t?" ".concat(t," | ecommerce : Point of Sale and E-Commerce Website all in one"):"ecommerce : Point of Sale and E-Commerce Website all in one"]}),Object(o.jsx)("meta",{name:"description",content:a?" ".concat(a," "):"ecommerce : Point of Sale and E-Commerce Website all in one"})]})},d=a(165),u=a(662),m=a(197),b=a(148),p=a(697),j=a(88);t.default=()=>{const{t:e}=Object(j.a)(),{state:{adminInfo:t}}=Object(n.useContext)(r.a),{register:a,handleSubmit:l,onSubmit:g,errors:f,imageUrl:x,setImageUrl:O}=Object(s.a)(t._id);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(i,{children:[" ",e("EditProfile")," "]}),Object(o.jsx)("div",{className:"container p-6 mx-auto bg-white  dark:bg-gray-800 dark:text-gray-200 rounded-lg",children:Object(o.jsxs)("form",{onSubmit:l(g),children:[Object(o.jsxs)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full",children:[Object(o.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(o.jsx)(d.a,{label:e("ProfilePicture")}),Object(o.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(o.jsx)(u.a,{imageUrl:x,setImageUrl:O,folder:"customer"})})]}),Object(o.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(o.jsx)(d.a,{label:e("ProfileName")}),Object(o.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(o.jsx)(m.a,{register:a,label:"Name",name:"name",type:"text",placeholder:"Your Name"}),Object(o.jsx)(b.a,{errorName:f.name})]})]}),Object(o.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(o.jsx)(d.a,{label:e("ProfileEmail")}),Object(o.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(o.jsx)(m.a,{register:a,label:"Email",name:"email",type:"text",placeholder:"Email"}),Object(o.jsx)(b.a,{errorName:f.email})]})]}),Object(o.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(o.jsx)(d.a,{label:e("ProfileContactNumber")}),Object(o.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(o.jsx)(m.a,{register:a,label:"Contact Number",name:"phone",type:"text",placeholder:"Contact Number"}),Object(o.jsx)(b.a,{errorName:f.phone})]})]}),Object(o.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(o.jsx)(d.a,{label:e("ProfileYourRole")}),Object(o.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(o.jsx)(p.a,{register:a,label:"Role",name:"role"}),Object(o.jsx)(b.a,{errorName:f.role})]})]})]}),Object(o.jsx)("div",{className:"flex flex-row-reverse pr-6 pb-6",children:Object(o.jsx)(c.Button,{type:"submit",className:"h-12 px-6",children:e("updateProfile")})})]})})]})}},146:function(e,t,a){"use strict";var n=a(95);const c={addGlobalSetting:async e=>n.a.post("/setting/global/add",e),getGlobalSetting:async()=>n.a.get("/setting/global/all"),updateGlobalSetting:async e=>n.a.put("/setting/global/update",e)};t.a=c},148:function(e,t,a){"use strict";a(0);var n=a(1);t.a=e=>{let{errorName:t}=e;return Object(n.jsx)(n.Fragment,{children:t&&Object(n.jsx)("span",{className:"text-red-400 text-sm mt-2",children:t.message})})}},165:function(e,t,a){"use strict";a(0);var n=a(35),c=a(1);t.a=e=>{let{label:t}=e;return Object(c.jsx)(n.Label,{className:"col-span-4 sm:col-span-2 font-medium text-sm",children:t})}},189:function(e,t,a){"use strict";var n=a(95);const c={registerAdmin:async e=>n.a.post("/signup",e),loginAdmin:async e=>n.a.post("/login",e),forgetPassword:async e=>n.a.post("/forget-password",e),resetPassword:async e=>n.a.put("/admin/reset-password",e),signUpWithProvider:async e=>n.a.post("/admin/signup",e),addStaff:async e=>n.a.post("/admin/add",e),getAllStaff:async e=>n.a.get("/admin",e),getStaffById:async(e,t)=>n.a.post("/admin/".concat(e),t),updateStaff:async(e,t)=>n.a.put("/admin/".concat(e),t),updateStaffStatus:async(e,t)=>n.a.put("/admin/update-status/".concat(e),t),deleteStaff:async e=>n.a.delete("/admin/".concat(e))};t.a=c},197:function(e,t,a){"use strict";a(0);var n=a(35),c=a(1);t.a=e=>{let{register:t,defaultValue:a,required:r,name:s,label:l,type:o,placeholder:i}=e;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(n.Input,{...t("".concat(s),{required:!r&&"".concat(l," is required!")}),defaultValue:a,type:o,placeholder:i,name:s,className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"})})}},390:function(e,t){},391:function(e,t){},428:function(e,t){},430:function(e,t){},465:function(e,t){},467:function(e,t){},468:function(e,t){},473:function(e,t){},475:function(e,t){},481:function(e,t){},483:function(e,t){},502:function(e,t){},514:function(e,t){},517:function(e,t){},638:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=638},662:function(e,t,a){"use strict";var n=a(0),c=a(39),r=a(145),s=a.n(r),l=a(661),o=a(255),i=a.n(o),d=a(108),u=a(109),m=a(146),b=a(37),p=a(688),j=a(660),g=a(653),f=a.n(g),x=a(694),O=a(695);const h="card";var v=a(1);var y=e=>{let{id:t,image:a,index:c,moveCard:r,handleRemoveImage:s}=e;const l=Object(n.useRef)(null),[{handlerId:o},i]=Object(x.a)({accept:h,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var a;if(!l.current)return;const n=e.index,s=c;if(n===s)return;const o=null===(a=l.current)||void 0===a?void 0:a.getBoundingClientRect(),i=(o.bottom-o.top)/2,d=t.getClientOffset().y-o.top;n<s&&d<i||n>s&&d>i||(r(n,s),e.index=s)}}),[{},u]=Object(O.a)({type:h,item:()=>({id:t,index:c}),collect:e=>({isDragging:e.isDragging()})});return u(i(l)),Object(v.jsx)("div",{ref:l,"data-handler-id":o,children:Object(v.jsxs)("div",{className:"relative",children:[Object(v.jsx)("img",{className:"inline-flex border rounded-md border-gray-100 dark:border-gray-600 w-24 max-h-24 p-2 m-2",src:a,alt:"product"}),0===c&&Object(v.jsx)("p",{className:"text-xs absolute py-1 w-full bottom-0 inset-x-0 bg-blue-500 rounded-full text-white text-center ",children:"Default Image"}),Object(v.jsx)("button",{type:"button",className:"absolute top-0 right-0 text-red-500 focus:outline-none",onClick:()=>s(a),children:Object(v.jsx)(d.v,{})})]})})};var _=e=>{let{setImageUrl:t,imageUrl:a,handleRemoveImage:c}=e;const r=Object(n.useCallback)(((e,a)=>{t((t=>f()(t,{$splice:[[e,1],[a,0,t[e]]]})))}),[t]),s=Object(n.useCallback)(((e,t)=>Object(v.jsx)(y,{index:t,id:e.id,text:e.text,moveCard:r,image:e,handleRemoveImage:c},t+1)),[r,c]);return Object(v.jsx)(v.Fragment,{children:a.map(((e,t)=>s(e,t)))})};i.a.config({cloud_name:"your_cloudinary_cloud_name",api_key:"your_cloudinary_api_key",api_secret:"your_cloudinary_api_secret"});t.a=e=>{let{setImageUrl:t,imageUrl:a,product:r,folder:o}=e;const[g,f]=Object(n.useState)([]),[x,O]=Object(n.useState)(!1),[h,y]=Object(n.useState)(""),{data:N}=Object(u.a)(m.a.getGlobalSetting),{getRootProps:w,getInputProps:S,fileRejections:D}=Object(l.a)({accept:"image/*",multiple:!!r,maxSize:5e5,maxFiles:(null===N||void 0===N?void 0:N.number_of_image_per_product)||2,onDrop:e=>{f(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});Object(n.useEffect)((()=>{D&&D.map((e=>{let{file:t,errors:a}=e;return Object(v.jsxs)("li",{children:[t.path," - ",t.size," bytes",Object(v.jsx)("ul",{children:a.map((e=>Object(v.jsx)("li",{children:"too-many-files"===e.code?Object(b.b)("Maximum ".concat(null===N||void 0===N?void 0:N.number_of_image_per_product," Image Can be Upload!")):Object(b.b)(e.message)},e.code)))})]},t.path)})),g&&g.forEach((e=>{if(r&&(null===a||void 0===a?void 0:a.length)+(null===g||void 0===g?void 0:g.length)>(null===N||void 0===N?void 0:N.number_of_image_per_product))return Object(b.b)("Maximum ".concat(null===N||void 0===N?void 0:N.number_of_image_per_product," Image Can be Upload!"));if(O(!0),y("Uploading...."),r){if(null===a||void 0===a?void 0:a.find((e=>e==="".concat("https://api.cloudinary.com/v1_1/your_cloudinary_cloud_name/image/upload"))))return O(!1)}const n=e.name.replaceAll(/\s/g,""),c=null===n||void 0===n?void 0:n.substring(0,n.lastIndexOf(".")),l=new FormData;l.append("file",e),l.append("upload_preset","your_cloudinary_upload_preset"),l.append("cloud_name","your_cloudinary_cloud_name"),l.append("folder",o),l.append("public_id",c),s()({url:"https://api.cloudinary.com/v1_1/your_cloudinary_cloud_name/image/upload",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:l}).then((e=>{Object(b.c)("Image Uploaded successfully!"),O(!1),t(r?t=>[...t,e.data.secure_url]:e.data.secure_url)})).catch((e=>{console.error("err",e),Object(b.b)(e.Message),O(!1)}))}))}),[g]);const I=g.map((e=>Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("img",{className:"inline-flex border-2 border-gray-100 w-24 max-h-24",src:e.preview,alt:e.name})})},e.name)));Object(n.useEffect)((()=>()=>{g.forEach((e=>URL.revokeObjectURL(e.preview)))}),[g]);const C=async e=>{try{const n=e.split("/").pop().split(".")[0],c="".concat(o,"/").concat(n),s=await i.a.v2.uploader.destroy(c);if(O(!1),Object(b.b)("ok"===s.result?"Image delete successfully!":s.result),r){const n=null===a||void 0===a?void 0:a.filter((t=>t!==e));t(n)}else t("")}catch(h){console.error("err",h),Object(b.b)(h.Message),O(!1)}};return Object(v.jsxs)("div",{className:"w-full text-center",children:[Object(v.jsxs)("div",{className:"border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md cursor-pointer px-6 pt-5 pb-6",...w(),children:[Object(v.jsx)("input",{...S()}),Object(v.jsx)("span",{className:"mx-auto flex justify-center",children:Object(v.jsx)(d.r,{className:"text-3xl text-green-500"})}),Object(v.jsx)("p",{className:"text-sm mt-2",children:Object(c.b)("DragYourImage")}),Object(v.jsx)("em",{className:"text-xs text-gray-400",children:Object(c.b)("imageFormat")})]}),Object(v.jsx)("div",{className:"text-green-500",children:x&&h}),Object(v.jsx)("aside",{className:"flex flex-row flex-wrap mt-4",children:r?Object(v.jsx)(p.a,{backend:j.a,children:Object(v.jsx)(_,{setImageUrl:t,imageUrl:a,handleRemoveImage:C})}):!r&&a?Object(v.jsxs)("div",{className:"relative",children:[" ",Object(v.jsx)("img",{className:"inline-flex border rounded-md border-gray-100 dark:border-gray-600 w-24 max-h-24 p-2",src:a,alt:"product"}),Object(v.jsx)("button",{type:"button",className:"absolute top-0 right-0 text-red-500 focus:outline-none",onClick:()=>C(a),children:Object(v.jsx)(d.v,{})})]}):I})]})}},697:function(e,t,a){"use strict";a(0);var n=a(35),c=a(1);t.a=e=>{let{setRole:t,register:a,name:r,label:s}=e;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(n.Select,{onChange:e=>t(e.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:r,...a("".concat(r),{required:"".concat(s," is required!")}),children:[Object(c.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:"Staff role"}),Object(c.jsx)("option",{value:"Admin",children:"Admin"}),Object(c.jsx)("option",{value:"CEO",children:"CEO"}),Object(c.jsx)("option",{value:"Manager",children:"Manager"}),Object(c.jsx)("option",{value:"Accountant",children:"Accountant"}),Object(c.jsx)("option",{value:"Driver",children:" Driver "}),Object(c.jsx)("option",{value:"Security Guard",children:"Security Guard"}),Object(c.jsx)("option",{value:"Deliver Person",children:"Delivery Person"})]})})}},737:function(e,t,a){"use strict";var n=a(163),c=a.n(n),r=a(14),s=a.n(r),l=a(0),o=a(247),i=a(3),d=a(23),u=a(36),m=a(189),b=a(37);t.a=e=>{const{state:t}=Object(l.useContext)(d.a),{adminInfo:a}=t,{isDrawerOpen:n,closeDrawer:r,setIsUpdate:p,lang:j}=Object(l.useContext)(u.a),[g,f]=Object(l.useState)(""),[x,O]=Object(l.useState)(c()(new Date).format("YYYY-MM-DD")),[h,v]=Object(l.useState)(j),[y,_]=Object(l.useState)({}),[N,w]=Object(l.useState)(!1),S=Object(i.h)(),{register:D,handleSubmit:I,setValue:C,clearErrors:k,formState:{errors:U}}=Object(o.a)(),P=async()=>{try{const t=await m.a.getStaffById(e,{email:a.email});t&&(_(t),C("name",t.name[h||"en"]),C("email",t.email),C("password"),C("phone",t.phone),C("role",t.role),O(c()(t.joiningData).format("YYYY-MM-DD")),f(t.image))}catch(r){var t,n;Object(b.b)(r?null===r||void 0===r||null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message:null===r||void 0===r?void 0:r.message)}};return Object(l.useEffect)((()=>{if(!n)return _({}),C("name"),C("email"),C("password"),C("phone"),C("role"),C("joiningDate"),f(""),k("name"),k("email"),k("password"),k("phone"),k("role"),k("joiningDate"),f(""),v(j),void C("language",h);e&&P()}),[e,C,n,a.email,k]),Object(l.useEffect)((()=>{"/edit-profile"===S.pathname&&s.a.get("adminInfo")&&P()}),[S.pathname,C]),{register:D,handleSubmit:I,onSubmit:async t=>{try{w(!0);const a={name:{[h]:t.name},email:t.email,password:t.password,phone:t.phone,role:t.role,joiningDate:x||c()(new Date).format("YYYY-MM-DD"),image:g,lang:h};if(e){const t=await m.a.updateStaff(e,a);p(!0),w(!1),Object(b.c)(t.message),r()}else{const e=await m.a.addStaff({staffData:a});p(!0),w(!1),Object(b.c)(e.message),r()}}catch(s){var a,n;Object(b.b)(s?null===s||void 0===s||null===(a=s.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message:null===s||void 0===s?void 0:s.message),w(!1),r()}},language:h,errors:U,setImageUrl:f,imageUrl:g,selectedDate:x,setSelectedDate:O,isSubmitting:N,handleSelectLanguage:e=>{v(e),Object.keys(y).length>0&&C("name",y.name[e||"en"])}}}},95:function(e,t,a){"use strict";var n=a(145),c=a.n(n),r=a(14),s=a.n(r);const l=c.a.create({baseURL:"https://backend.canadasentinel.ca/api",timeout:5e4,headers:{Accept:"application/json","Content-Type":"application/json"}});l.interceptors.request.use((function(e){let t,a;return s.a.get("adminInfo")&&(t=JSON.parse(s.a.get("adminInfo"))),s.a.get("company")&&(a=s.a.get("company")),{...e,headers:{authorization:t?"Bearer ".concat(t.token):null,company:a||null}}}));const o=e=>e.data,i={get:(e,t,a)=>l.get(e,t,a).then(o),post:(e,t)=>l.post(e,t).then(o),put:(e,t,a)=>l.put(e,t,a).then(o),patch:(e,t)=>l.patch(e,t).then(o),delete:(e,t)=>l.delete(e,t).then(o)};t.a=i}}]);
//# sourceMappingURL=26.ae9563d1.chunk.js.map