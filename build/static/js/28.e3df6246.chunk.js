(this["webpackJsonpecommerce-admin"]=this["webpackJsonpecommerce-admin"]||[]).push([[28],{116:function(e,t,a){"use strict";var s=a(143),n=a.n(s),c=a(0),r=a(41);t.a=e=>{const[t,a]=Object(c.useState)([]||!1),[s,l]=Object(c.useState)(""),[i,o]=Object(c.useState)(!0),{isUpdate:d,setIsUpdate:u,currentPage:m,category:b,searchText:p,invoice:j,status:g,zone:O,time:x,sortedField:f,source:h,limitData:v,startDate:y,endDate:S}=Object(c.useContext)(r.a);return Object(c.useEffect)((()=>{let t=!1,s=n.a.CancelToken.source();return(async()=>{try{const n=await e({cancelToken:s.token});t||(a(n),l(""),o(!1))}catch(c){t||(l(c.message),n.a.isCancel(c),l(c.message),o(!1),a([]))}})(),u(!1),()=>{t=!0,s.cancel("Cancelled in cleanup")}}),[d,m,b,p,j,g,O,x,f,h,v,y,S]),{data:t,error:s,loading:i}}},117:function(e,t,a){"use strict";var s=a(99);const n={getAllProducts:async e=>{let{page:t,limit:a,category:n,title:c,price:r}=e;let l={category:null!==n?n:"",title:null!==c?c:"",price:null!==r?r:""};return s.a.post(`/product/list?page=${t}&pageSize=${a}`,l)},getProductById:async e=>s.a.get(`/product/${e}/data`),addProduct:async e=>s.a.post("/product/save",e),addAllProducts:async e=>s.a.post("/products/all",e),updateProduct:async(e,t)=>s.a.post("/product/save",t),updateManyProducts:async e=>s.a.patch("products/update/many",e),updateStatus:async(e,t)=>s.a.put(`/products/status/${e}`,t),deleteProduct:async(e,t)=>s.a.delete(`/product/${e}/delete`,t),deleteManyProducts:async e=>s.a.post("/product/multiple-delete",e)};t.a=n},1266:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(40),c=a(26),r=a(768),l=a(1234),i=a(3);var o=e=>{let{title:t,description:a}=e;return Object(i.jsxs)(l.a,{children:[Object(i.jsxs)("title",{children:[" ",t?` ${t} | ecommerce : Point of Sale and E-Commerce Website all in one`:"ecommerce : Point of Sale and E-Commerce Website all in one"]}),Object(i.jsx)("meta",{name:"description",content:a?` ${a} `:"ecommerce : Point of Sale and E-Commerce Website all in one"})]})},d=a(159),u=a(690),m=a(187),b=a(145),p=a(725),j=a(95);t.default=()=>{const{t:e}=Object(j.a)(),{state:{adminInfo:t}}=Object(s.useContext)(c.a),{register:a,handleSubmit:l,onSubmit:g,errors:O,imageUrl:x,setImageUrl:f}=Object(r.a)(t._id);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(o,{children:[" ",e("EditProfile")," "]}),Object(i.jsx)("div",{className:"container p-6 mx-auto bg-white  dark:bg-gray-800 dark:text-gray-200 rounded-lg",children:Object(i.jsxs)("form",{onSubmit:l(g),children:[Object(i.jsxs)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full",children:[Object(i.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(i.jsx)(d.a,{label:e("ProfilePicture")}),Object(i.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(i.jsx)(u.a,{imageUrl:x,setImageUrl:f,folder:"customer"})})]}),Object(i.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(i.jsx)(d.a,{label:e("ProfileName")}),Object(i.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(i.jsx)(m.a,{register:a,label:"Name",name:"name",type:"text",placeholder:"Your Name"}),Object(i.jsx)(b.a,{errorName:O.name})]})]}),Object(i.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(i.jsx)(d.a,{label:e("ProfileEmail")}),Object(i.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(i.jsx)(m.a,{register:a,label:"Email",name:"email",type:"text",placeholder:"Email"}),Object(i.jsx)(b.a,{errorName:O.email})]})]}),Object(i.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(i.jsx)(d.a,{label:e("ProfileContactNumber")}),Object(i.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(i.jsx)(m.a,{register:a,label:"Contact Number",name:"phone",type:"text",placeholder:"Contact Number"}),Object(i.jsx)(b.a,{errorName:O.phone})]})]}),Object(i.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(i.jsx)(d.a,{label:e("ProfileYourRole")}),Object(i.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(i.jsx)(p.a,{register:a,label:"Role",name:"role"}),Object(i.jsx)(b.a,{errorName:O.role})]})]})]}),Object(i.jsx)("div",{className:"flex flex-row-reverse pr-6 pb-6",children:Object(i.jsx)(n.Button,{type:"submit",className:"h-12 px-6",children:e("updateProfile")})})]})})]})}},144:function(e,t,a){"use strict";var s=a(99);const n={addGlobalSetting:async e=>s.a.post("/setting/global/add",e),getGlobalSetting:async()=>s.a.get("/setting/global/all"),updateGlobalSetting:async e=>s.a.put("/setting/global/update",e),removeMultiDeleteMedia:async e=>s.a.post("/image/multiple-delete",e)};t.a=n},145:function(e,t,a){"use strict";a(0);var s=a(3);t.a=e=>{let{errorName:t}=e;return Object(s.jsx)(s.Fragment,{children:t&&Object(s.jsx)("span",{className:"text-red-400 text-sm mt-2",children:t.message})})}},159:function(e,t,a){"use strict";a(0);var s=a(40),n=a(3);t.a=e=>{let{label:t}=e;return Object(n.jsx)(s.Label,{className:"col-span-4 sm:col-span-2 font-medium text-sm",children:t})}},178:function(e,t,a){"use strict";var s=a(99);const n={registerAdmin:async e=>s.a.post("/signup",e),loginAdmin:async e=>s.a.post("/login",e),forgetPassword:async e=>s.a.post("/forget-password",e),resetPassword:async e=>s.a.put("/admin/reset-password",e),signUpWithProvider:async e=>s.a.post("/admin/signup",e),addStaff:async e=>s.a.post("/admin/add",e),getAllStaff:async e=>s.a.get("/admin",e),getStaffById:async(e,t)=>s.a.post(`/admin/${e}`,t),updateStaff:async(e,t)=>s.a.put(`/admin/${e}`,t),updateStaffStatus:async(e,t)=>s.a.put(`/admin/update-status/${e}`,t),deleteStaff:async e=>s.a.delete(`/admin/${e}`)};t.a=n},187:function(e,t,a){"use strict";a(0);var s=a(40),n=a(3);t.a=e=>{let{register:t,defaultValue:a,required:c,name:r,label:l,type:i,placeholder:o,min:d,max:u}=e;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(s.Input,{...t(`${r}`,{required:!c&&`${l} is required!`}),defaultValue:a,type:i,placeholder:o,name:r,className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",min:d,max:u})})}},410:function(e,t){},411:function(e,t){},427:function(e,t){},455:function(e,t){},457:function(e,t){},492:function(e,t){},494:function(e,t){},495:function(e,t){},500:function(e,t){},502:function(e,t){},508:function(e,t){},510:function(e,t){},529:function(e,t){},541:function(e,t){},544:function(e,t){},690:function(e,t,a){"use strict";var s=a(0),n=a(45),c=(a(143),a(689)),r=a(276),l=a.n(r),i=a(110),o=a(116),d=a(144),u=a(42),m=a(715),b=a(688),p=a(681),j=a.n(p),g=a(722),O=a(723);const x="card";var f=a(3);var h=e=>{let{id:t,image:a,index:n,moveCard:c,handleRemoveImage:r}=e;const l=Object(s.useRef)(null),[{handlerId:o},d]=Object(g.a)({accept:x,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var a;if(!l.current)return;const s=e.index,r=n;if(s===r)return;const i=null===(a=l.current)||void 0===a?void 0:a.getBoundingClientRect(),o=(i.bottom-i.top)/2,d=t.getClientOffset().y-i.top;s<r&&d<o||s>r&&d>o||(c(s,r),e.index=r)}}),[{},u]=Object(O.a)({type:x,item:()=>({id:t,index:n}),collect:e=>({isDragging:e.isDragging()})});return u(d(l)),Object(f.jsx)("div",{ref:l,"data-handler-id":o,children:Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsx)("img",{className:"inline-flex border rounded-md border-gray-100 dark:border-gray-600 w-24 max-h-24 p-2 m-2",src:null===a||void 0===a?void 0:a.preview,alt:"product"}),0===n&&Object(f.jsx)("p",{className:"text-xs absolute py-1 w-full bottom-0 inset-x-0 bg-blue-500 rounded-full text-white text-center ",children:"Default Image"}),Object(f.jsx)("button",{type:"button",className:"absolute top-0 right-0 text-red-500 focus:outline-none",onClick:()=>r(a),children:Object(f.jsx)(i.v,{})})]})})};var v=e=>{let{setImageUrl:t,imageUrl:a,handleRemoveImage:n}=e;const c=Object(s.useCallback)(((e,a)=>{t((t=>j()(t,{$splice:[[e,1],[a,0,t[e]]]})))}),[t]),r=Object(s.useCallback)(((e,t)=>Object(f.jsx)(h,{index:t,id:e.id,text:e.text,moveCard:c,image:e,handleRemoveImage:n},t+1)),[c,n]);return Object(f.jsx)(f.Fragment,{children:a.map(((e,t)=>r(e,t)))})},y=a(117);l.a.config({cloud_name:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLOUD_NAME,api_key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLOUDINARY_API_KEY,api_secret:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLOUDINARY_API_SECRET});t.a=e=>{let{setImageUrl:t,imageUrl:a,product:r,folder:l,method:p,id:j}=e;const[g,O]=Object(s.useState)([]),[x,h]=Object(s.useState)(!1),[S,N]=Object(s.useState)(""),[_,D]=Object(s.useState)([]),[E,P]=Object(s.useState)(),{data:w}=Object(o.a)(d.a.getGlobalSetting);Object(s.useEffect)((()=>{(async()=>{try{if(j){const e=await y.a.getProductById(j);P(e.data)}}catch(e){console.error("Error fetching product details:",e)}})()}),[j]);const{getRootProps:C,getInputProps:I,fileRejections:R}=Object(c.a)({accept:"image/*",multiple:!!r,maxSize:5e5,maxFiles:(null===w||void 0===w?void 0:w.number_of_image_per_product)||3,onDrop:e=>{O(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});Object(s.useEffect)((()=>{console.log(a),console.log(g),g.map(((e,a)=>t((t=>[...t,e]))))}),[g]);const U=g.map((e=>Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:Object(f.jsx)("img",{className:"inline-flex border-2 border-gray-100 w-24 max-h-24",src:e.preview,alt:e.name})})},e.name)));Object(s.useEffect)((()=>()=>{g.forEach((e=>URL.revokeObjectURL(e.preview)))}),[g]);const T=async e=>{if(j){var s;let n=null===E||void 0===E||null===(s=E.images)||void 0===s?void 0:s.findIndex((t=>t.name===e));if(console.log(n),-1!=n){const e=[...a];e.splice(n,1),t(e);let s=new FormData;s.append("category_images",""),s.append("product_images",`${null===E||void 0===E?void 0:E.images[n].id}`);const c=await d.a.removeMultiDeleteMedia(s);Object(u.b)(200===c.status_code?"Image delete successfully!":c.result)}}else{let s=a.findIndex((t=>t===e));if(console.log(s),-1!=s){const e=[...a];e.splice(s,1),t(e)}}};return Object(f.jsxs)("div",{className:"w-full text-center",children:[Object(f.jsxs)("div",{className:"border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md cursor-pointer px-6 pt-5 pb-6",...C(),children:[Object(f.jsx)("input",{...I()}),Object(f.jsx)("span",{className:"mx-auto flex justify-center",children:Object(f.jsx)(i.r,{className:"text-3xl text-green-500"})}),Object(f.jsx)("p",{className:"text-sm mt-2",children:Object(n.b)("DragYourImage")}),Object(f.jsx)("em",{className:"text-xs text-gray-400",children:Object(n.b)("imageFormat")})]}),Object(f.jsx)("div",{className:"text-green-500",children:x&&S}),Object(f.jsx)("aside",{className:"flex flex-row flex-wrap mt-4",children:r?Object(f.jsx)(m.a,{backend:b.a,children:Object(f.jsx)(v,{setImageUrl:t,imageUrl:a,handleRemoveImage:T})}):!r&&a?Object(f.jsxs)("div",{className:"relative",children:[" ",Object(f.jsx)("img",{className:"inline-flex border rounded-md border-gray-100 dark:border-gray-600 w-24 max-h-24 p-2",src:a,alt:"product"}),Object(f.jsx)("button",{type:"button",className:"absolute top-0 right-0 text-red-500 focus:outline-none",onClick:()=>T(a),children:Object(f.jsx)(i.v,{})})]}):U})]})}},725:function(e,t,a){"use strict";a(0);var s=a(40),n=a(3);t.a=e=>{let{setRole:t,register:a,name:c,label:r}=e;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(s.Select,{onChange:e=>t(e.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:c,...a(`${c}`,{required:`${r} is required!`}),children:[Object(n.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:"Staff role"}),Object(n.jsx)("option",{value:"Admin",children:"Admin"}),Object(n.jsx)("option",{value:"CEO",children:"CEO"}),Object(n.jsx)("option",{value:"Manager",children:"Manager"}),Object(n.jsx)("option",{value:"Accountant",children:"Accountant"}),Object(n.jsx)("option",{value:"Driver",children:" Driver "}),Object(n.jsx)("option",{value:"Security Guard",children:"Security Guard"}),Object(n.jsx)("option",{value:"Deliver Person",children:"Delivery Person"})]})})}},768:function(e,t,a){"use strict";var s=a(160),n=a.n(s),c=a(18),r=a.n(c),l=a(0),i=a(215),o=a(6),d=a(26),u=a(41),m=a(178),b=a(42);t.a=e=>{const{state:t}=Object(l.useContext)(d.a),{adminInfo:a}=t,{isDrawerOpen:s,closeDrawer:c,setIsUpdate:p,lang:j}=Object(l.useContext)(u.a),[g,O]=Object(l.useState)(""),[x,f]=Object(l.useState)(n()(new Date).format("YYYY-MM-DD")),[h,v]=Object(l.useState)(j),[y,S]=Object(l.useState)({}),[N,_]=Object(l.useState)(!1),D=Object(o.h)(),{register:E,handleSubmit:P,setValue:w,clearErrors:C,formState:{errors:I}}=Object(i.a)(),R=async()=>{try{const t=await m.a.getStaffById(e,{email:a.email});t&&(S(t),w("name",t.name[h||"en"]),w("email",t.email),w("password"),w("phone",t.phone),w("role",t.role),f(n()(t.joiningData).format("YYYY-MM-DD")),O(t.image))}catch(c){var t,s;Object(b.b)(c?null===c||void 0===c||null===(t=c.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message:null===c||void 0===c?void 0:c.message)}};return Object(l.useEffect)((()=>{if(!s)return S({}),w("name"),w("email"),w("password"),w("phone"),w("role"),w("joiningDate"),O(""),C("name"),C("email"),C("password"),C("phone"),C("role"),C("joiningDate"),O(""),v(j),void w("language",h);e&&R()}),[e,w,s,a.email,C]),Object(l.useEffect)((()=>{"/edit-profile"===D.pathname&&r.a.get("adminInfo")&&R()}),[D.pathname,w]),{register:E,handleSubmit:P,onSubmit:async t=>{try{_(!0);const a={name:{[h]:t.name},email:t.email,password:t.password,phone:t.phone,role:t.role,joiningDate:x||n()(new Date).format("YYYY-MM-DD"),image:g,lang:h};if(e){const t=await m.a.updateStaff(e,a);p(!0),_(!1),Object(b.c)(t.message),c()}else{const e=await m.a.addStaff({staffData:a});p(!0),_(!1),Object(b.c)(e.message),c()}}catch(r){var a,s;Object(b.b)(r?null===r||void 0===r||null===(a=r.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message:null===r||void 0===r?void 0:r.message),_(!1),c()}},language:h,errors:I,setImageUrl:O,imageUrl:g,selectedDate:x,setSelectedDate:f,isSubmitting:N,handleSelectLanguage:e=>{v(e),Object.keys(y).length>0&&w("name",y.name[e||"en"])}}}},99:function(e,t,a){"use strict";var s=a(143),n=a.n(s),c=a(18),r=a.n(c);const l=n.a.create({baseURL:"https://backend.kingsmankids.com/api",timeout:5e4,headers:{Accept:"application/json","Content-Type":"application/json"}});l.interceptors.request.use((function(e){let t,a;return r.a.get("adminInfo")&&(t=JSON.parse(r.a.get("adminInfo"))),r.a.get("company")&&(a=r.a.get("company")),{...e,headers:{authorization:t?`Bearer ${t.token}`:null,company:a||null}}}));const i=e=>e.data,o={get:(e,t,a)=>l.get(e,t,a).then(i),post:(e,t)=>l.post(e,t).then(i),put:(e,t,a)=>l.put(e,t,a).then(i),patch:(e,t)=>l.patch(e,t).then(i),delete:(e,t)=>l.delete(e,t).then(i)};t.a=o}}]);
//# sourceMappingURL=28.e3df6246.chunk.js.map